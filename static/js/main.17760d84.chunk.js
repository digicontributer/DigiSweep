(window.webpackJsonpdigisweep=window.webpackJsonpdigisweep||[]).push([[0],{211:function(e,t,a){e.exports=a(378)},216:function(e,t,a){},220:function(e,t){},227:function(e,t){},246:function(e,t){},248:function(e,t){},377:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),o=a.n(i),s=(a(216),a(104)),l=a(55),c=a(197),u=a(198),d=a(31),m=a(204),p=a(36),g=a.n(p),f=a(105),h=a.n(f),v=a(199),y=a.n(v),E=a(37),S=a.n(E),B=a(428),w=a(411),b=a(412),x=a(413),A=a(414),k=a(415),D=function(e){var t=e.address,a=e.amount,n=e.cancelDialog,i=e.confirmDialog,o=e.dialogOpen;return r.a.createElement(B.a,{open:o,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(w.a,{id:"alert-dialog-title"},"Confirm"),r.a.createElement(b.a,null,r.a.createElement(x.a,{id:"alert-dialog-description"},"Are you sure you wish to send ALL DigiByte (",r.a.createElement("b",null,a,"DGB"),") from this seed to ",r.a.createElement("b",null,t))),r.a.createElement(A.a,null,r.a.createElement(k.a,{onClick:n,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(k.a,{onClick:i,color:"primary",autoFocus:!0},"Okay")))},K=a(427),L=a(416),O=a(417),U=a(418),F=a(419),C=a(420),N=function(e){var t=e.closeModal,a=e.derivitorStatus,n=e.gapLimit,i=e.progressModalOpen;return r.a.createElement(K.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:i,onClose:t},r.a.createElement("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"relative",background:"white",width:"95vh"}},r.a.createElement(L.a,null,r.a.createElement(O.a,null,r.a.createElement(U.a,null,r.a.createElement(F.a,null,"Wallet"),r.a.createElement(F.a,null,"Status"))),r.a.createElement(C.a,null,a.map(function(e){return r.a.createElement(U.a,{key:e.name},r.a.createElement(F.a,null,e.name),r.a.createElement(F.a,null,"[",e.status,"/",n,"]"))})))))},j=function(e){var t=e.closeDialog,a=e.dialogOpen,n=e.error;return r.a.createElement(B.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(w.a,{id:"alert-dialog-title"},"Error:"),r.a.createElement(b.a,null,r.a.createElement(x.a,{id:"alert-dialog-description"},n)),r.a.createElement(A.a,null,r.a.createElement(k.a,{onClick:t,color:"primary",autoFocus:!0},"Okay")))},T=a(421),I=a(422),P=a(205),M=a(426),W=a(424),G=a(429),R=a(425),X=a(423),J=a(430),V=function(e){var t=e.wif,a=e.gapLimit,n=e.selectedServer,i=e.startSearch,o=e.updateGapLimit,s=e.updateSelectedServer,l=e.updateWif;return r.a.createElement(T.a,null,r.a.createElement(I.a,null,r.a.createElement(P.a,{className:"card-title",color:"textPrimary",gutterBottom:!0,variant:"h5"},"Locating Funds"),r.a.createElement("p",null,"This app needs your private information in order to find and move your funds. It is safe to put your information here because it is not recorded or transmitted from your machine. Also when you are done you will have moved the funds to a new wallet so the information will not be helpful to hackers."),r.a.createElement("form",{className:"uploadForm"},r.a.createElement(M.a,{value:t,onChange:l,id:"outlined-email-input",label:"Recovery phrase (mnemonic) or File/Text backup",className:"textField",type:"text",margin:"normal",variant:"outlined",multiline:!0,rowsMax:"4",rows:"4"}),r.a.createElement("div",null,r.a.createElement("input",{accept:"image/*",className:"uploadInput",id:"contained-button-file",multiple:!0,type:"file"}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(k.a,{variant:"contained",component:"span",className:"uploadButton"},"Or Upload File"))),r.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",margin:"5px"}},r.a.createElement(W.a,{className:"formControl",style:{flexBasis:"80%"}},r.a.createElement(G.a,{shrink:!0,htmlFor:"server-label-placeholder"},"Server"),r.a.createElement(R.a,{value:n,onChange:s,input:r.a.createElement(X.a,{name:"server",fullWidth:!0,id:"server-label-placeholder"}),displayEmpty:!0,fullWidth:!0,name:"Server"},r.a.createElement(J.a,{value:"https://digiexplorer.info"},"Digiexplorer.info"),r.a.createElement(J.a,{value:"https://explorer-1.us.digibyteservers.io"},"explorer-1.us.digibyteservers.io"))),r.a.createElement(W.a,{className:"formControl",style:{flexBasis:"15%"}},r.a.createElement(G.a,{shrink:!0,htmlFor:"gaplimit-label-placeholder"},"Gap Limit"),r.a.createElement(R.a,{value:a,onChange:o,input:r.a.createElement(X.a,{name:"gaplimit",id:"gaplimit-label-placeholder"}),displayEmpty:!0,name:"Gap Limit"},r.a.createElement(J.a,{value:20},"20"),r.a.createElement(J.a,{value:50},"50"),r.a.createElement(J.a,{value:100},"100"),r.a.createElement(J.a,{value:500},"500"),r.a.createElement(J.a,{value:1e3},"1000"))))),r.a.createElement(k.a,{variant:"contained",color:"primary",className:"submitButton",onClick:i},"Recover My Funds")))},H={exportButton:{marginTop:"0px",flexBasis:"10%"}},q=function(e){var t=e.addressError,a=e.currentUnit,n=e.dgbAddress,i=e.getBalance,o=e.sendBackup,s=e.updateAddress,l=e.wallet;return r.a.createElement(T.a,{style:{marginTop:"25px"}},r.a.createElement(I.a,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(P.a,{className:"card-title",color:"textPrimary",gutterBottom:!0,variant:"h5",style:{flexBasis:"90%"}},"Funds Found!"),r.a.createElement(k.a,{variant:"contained",color:"primary",style:H.exportButton,onClick:function(){var e=l.map(function(e){var t={name:e.name};return"privKey"!==e.type?t.funds=e.addrs.filter(function(e){return e.hasBalance}).map(function(e){return{balance:e.utxos.filter(function(e){return e.amount}).map(function(e){return e.amount}).reduce(function(e,t){return e+t},0),address:e.main.privateKey.toAddress().toString(),legacyAddress:e.main.privateKey.toLegacyAddress().toString(),privateKey:e.main.privateKey.toWIF()}}):(t.name="PrivateKey",t.funds={balance:e.totalBalance,address:e.main.toAddress().toString(),legacyAddress:e.main.toLegacyAddress().toString(),privateKey:e.main.toWIF()}),t});if(window.navigator&&window.navigator.msSaveOrOpenBlob){var t=new Blob([decodeURIComponent(encodeURI(JSON.stringify(e,null,2)))],{type:"application/json;charset=utf-8;"});navigator.msSaveOrOpenBlob(t,"export.json")}else{var a=document.createElement("a");a.download="export.json",a.href="data:application/json;charset=utf-8;,"+encodeURIComponent(JSON.stringify(e,null,2)),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},"Export")),r.a.createElement("p",null,"We found a total of ",r.a.createElement("b",null,i(l.map(function(e){return e.totalBalance}).reduce(function(e,t){return e+t}))," ",a),". If your balance below looks correct then you may enter a new DigiByte address and we will send you the funds."),r.a.createElement(L.a,null,r.a.createElement(O.a,null,r.a.createElement(U.a,null,r.a.createElement(F.a,null,"Type"),r.a.createElement(F.a,null,"Address"),r.a.createElement(F.a,null,"Amount"),r.a.createElement(F.a,null,"Wallet"))),r.a.createElement(C.a,null,l.filter(function(e){return e.totalBalance}).map(function(e,t){return"privKey"!==e.type?e.addrs.filter(function(e){return e.hasBalance}).map(function(t,n){return r.a.createElement(U.a,{key:n},r.a.createElement(F.a,null,"Input"),r.a.createElement(F.a,null,t.main.privateKey.toLegacyAddress().toString()),r.a.createElement(F.a,null,i(t.balance)," ",a),r.a.createElement(F.a,null,e.name))}):"privKey"===e.type?e.utxos.map(function(e,t){return r.a.createElement(U.a,{key:t},r.a.createElement(F.a,null,"Input"),r.a.createElement(F.a,null,e.address),r.a.createElement(F.a,null,i(e.amount)," ",a),r.a.createElement(F.a,null,"Private Key"))}):r.a.createElement(U.a,{key:t})}))),r.a.createElement(M.a,{required:!0,fullWidth:!0,error:t,onChange:s,label:"Enter DigiByte Address",value:n,margin:"normal"}),r.a.createElement(k.a,{variant:"contained",color:"primary",className:"submitButton",onClick:o,disabled:t},"Send DigiByte to Address")))},z=function(e){var t=e.txid;return r.a.createElement(T.a,null,r.a.createElement(I.a,null,r.a.createElement(P.a,{className:"card-title",color:"textPrimary",gutterBottom:!0,variant:"h5"},"Transaction Sent!"),r.a.createElement("h4",null,"TXID: ",r.a.createElement("a",{href:"https://digiexplorer.info/tx/".concat(t)},t))))},$=20,_=function(e){return fetch("https://digiexplorer.info/api/addr/".concat(e,"/utxo")).then(function(e){return e.json()})},Q=[{path:"m/0",secret:"DigiByte seed",name:"Core Mobile",addrs:[]},{path:"m/44'/0'/0'",secret:"Bitcoin seed",name:"DigiByte Go",addrs:[]},{path:"m/44'/3'/0'",secret:"Bitcoin seed",name:"BIP44 Doge Wallet",addrs:[]},{path:"m/44'/20'/0'",secret:"Bitcoin seed",name:"BIP44 Wallets",addrs:[]}];a(377);var Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={gapLimit:$,currentUnit:"DGB",wif:"",txid:null,dgbAddress:"",addressError:!0,wallet:[],selectedServer:"https://digiexplorer.info",stepTwo:!1,stepThree:!1,confirmDialog:!1,dialogOpen:!1,progressModalOpen:!1,error:null,passwordDialog:!1,derivitorStatus:Q.map(function(e){return{name:e.name,status:0}}),usdRate:0},a.state.gapStatus=a.state.gapLimit,a.startSearch=a.startSearch.bind(Object(d.a)(a)),a.sendBackup=a.sendBackup.bind(Object(d.a)(a)),a.updateAddress=a.updateAddress.bind(Object(d.a)(a)),a.reset=a.reset.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://digibyte.io/rates.php").then(function(e){return e.json()}).then(function(t){var a=t.filter(function(e){return"USD"===e.code})[0];e.setState({usdRate:a.rate})})}},{key:"getBalance",value:function(e){return"USD"===this.state.currentUnit?(e*this.state.usdRate).toFixed(2):e}},{key:"updateAddress",value:function(e){g.a.Address.isValid(e.target.value)?this.setState({addressError:!1}):this.setState({addressError:!0}),this.setState({dgbAddress:e.target.value})}},{key:"checkInput",value:function(){var e=this;return new S.a(function(t,a){var n=e.state.wif;if(!n.length)return t(e.setState({dialogOpen:!0,error:"No Input Provided!"}));var r=n.replace(/\s/g,",").split(",");if(function(e){return!!(e.length%3===0&&e.length>11&&e.length<25&&e[0].length<20&&h.a.isValid(e.join(" ")))}(r))return t({privKeys:r,type:"seed"});if(1===r.length&&"xprv"===r[0].substr(0,4))return t({privKeys:r,type:"xPrv"});var i=n.split(",").map(function(e){return new S.a(function(t,n){var r=e.split(":");if("6P"===r[0].substr(0,2)){var i=y.a.decrypt(r[0],r[1]),o=g.a.PrivateKey(i.privateKey).toWIF();if(!g.a.PrivateKey.isValid(o))return a(new Error("Invalid Private Key: ".concat(o)));t(o)}else{if(!g.a.PrivateKey.isValid(e))return a(new Error("Invalid Private Key: ".concat(e)));t(e)}})});return S.a.all(i).then(function(e){return t({privKeys:e,type:"privKeys"})})})}},{key:"updateDerivitorStatus",value:function(e,t){var a=this;return new S.a(function(n){var r=a.state.derivitorStatus.map(function(a){return a.name===e&&(a.status=t+1),a});a.setState({derivitorStatus:r},n())})}},{key:"getNextAddress",value:function(e){var t=this;e=e.join(" ");var a=[];return Q.filter(function(e){return e.addrs.filter(function(e){return!e.hasBalance}).length<t.state.gapLimit}).forEach(function(n){a.push(function(){var a=n.addrs.length,r=new h.a(e),i=g.a.HDPrivateKey.fromSeed(r.toSeed(),"livenet",n.secret),o=i.derive("".concat(n.path,"/").concat(n.addrs.length,"/0")),s=i.derive("".concat(n.path,"/").concat(n.addrs.length,"/1"));return n.addrs[a]={main:o,change:s},S.a.all([_(o.privateKey.toAddress().toString()),_(o.privateKey.toLegacyAddress().toString()),_(s.privateKey.toAddress().toString()),_(s.privateKey.toLegacyAddress().toString())]).spread(function(e,r,i,o){if(e.length||r.length||i.length||o.length){var s=t.state.gapStatus;t.setState({gapStatus:s+=1}),n.addrs[a].hasBalance=!0}return n.addrs[a].mainUtxos=e,n.addrs[a].mainLegacyUtxos=r,n.addrs[a].changeUtxos=i,n.addrs[a].changeLegacyUtxos=o,n.addrs[a].mainBalance=e.length?e.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,n.addrs[a].mainLegacyBalance=r.length?r.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,n.addrs[a].changeBalance=i.length?i.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,n.addrs[a].changeLegacyBalance=o.length?o.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,n.addrs[a].balance=n.addrs[a].changeLegacyBalance+n.addrs[a].changeBalance+n.addrs[a].mainLegacyBalance+n.addrs[a].mainBalance,t.updateDerivitorStatus(n.name,a)}).then(function(){return n})}())}),S.a.all(a)}},{key:"getDataFromSeed",value:function(e,t){var a=this;return new S.a(function(t,n){return a.getNextAddress(e).then(function(t){return t.some(function(e){return e.addrs.length<a.state.gapLimit})||t.filter(function(e){return e.addrs.filter(function(e){return!e.hasBalance}).length<a.state.gapLimit}).length?a.getDataFromSeed(e):t}).then(function(e){if(e.forEach(function(e){e.type="seed",e.addrs.map(function(e){return e.utxos=[].concat.apply([],[e.mainUtxos,e.mainLegacyUtxos,e.changeUtxos,e.changeLegacyUtxos]),e}),e.totalBalance=e.addrs.map(function(e){return e.utxos.map(function(e){return e.amount}).reduce(function(e,t){return e+t},0)}).reduce(function(e,t){return e+t})}),!e.filter(function(e){return e.totalBalance}).length)return a.setState({progressModalOpen:!1,dialogOpen:!0,error:"No Funds Found!"});a.setState({wallet:e,stepTwo:!0,progressModalOpen:!1})})})}},{key:"getDataFromKeys",value:function(e){var t=this;return S.a.map(e,function(e){var t={main:new g.a.PrivateKey(e)};return S.a.all([_(t.main.toAddress().toString()),_(t.main.toLegacyAddress().toString())]).spread(function(e,a){return t.utxos=[].concat(e,a),t.hasBalance=t.utxos.some(function(e){return e.amount}),t.totalBalance=t.utxos.map(function(e){return e.amount}).reduce(function(e,t){return e+t}),t.type="privKey",t})}).then(function(e){return t.setState({wallet:e,stepTwo:!0})})}},{key:"getNextXprvAddress",value:function(e,t){var a=this,n=t.addrs.length,r=g.a.HDPrivateKey(e),i=r.derive("".concat("m/0'/","0'/").concat(n,"'")),o=r.derive("".concat("m/0'/","1'/").concat(n));return t.addrs[n]={main:i,change:o},S.a.all([_(i.privateKey.toAddress().toString()),_(i.privateKey.toLegacyAddress().toString()),_(o.privateKey.toAddress().toString()),_(o.privateKey.toLegacyAddress().toString())]).spread(function(e,r,i,o){if(e.length||r.length||i.length||o.length){var s=a.state.gapStatus;a.setState({gapStatus:s+=1}),t.addrs[n].hasBalance=!0}return t.addrs[n].mainUtxos=e,t.addrs[n].mainLegacyUtxos=r,t.addrs[n].changeUtxos=i,t.addrs[n].changeLegacyUtxos=o,t.addrs[n].mainBalance=e.length?e.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,t.addrs[n].mainLegacyBalance=r.length?r.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,t.addrs[n].changeBalance=i.length?i.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,t.addrs[n].changeLegacyBalance=o.length?o.map(function(e){return e.amount}).reduce(function(e,t){return e+t}):0,t.addrs[n].balance=t.addrs[n].changeLegacyBalance+t.addrs[n].changeBalance+t.addrs[n].mainLegacyBalance+t.addrs[n].mainBalance,a.updateDerivitorStatus(t.name,n)}).then(function(){return t})}},{key:"getDataFromXprv",value:function(e,t){var a=this,n=t||{addrs:[],name:"DigiByte Core"};return this.getNextXprvAddress(e[0],n).then(function(t){return t.addrs.length<a.state.gapLimit||t.addrs.filter(function(e){return!e.hasBalance}).length<a.state.gapLimit?a.getDataFromXprv(e,t):t}).then(function(e){if(e){if(e.type="Core",e.addrs.map(function(e){return e.utxos=[].concat.apply([],[e.mainUtxos,e.mainLegacyUtxos,e.changeUtxos,e.changeLegacyUtxos]),e}),e.totalBalance=e.addrs.map(function(e){return e.utxos.map(function(e){return e.amount}).reduce(function(e,t){return e+t},0)}).reduce(function(e,t){return e+t}),!e.totalBalance)return a.setState({progressModalOpen:!1,dialogOpen:!0,error:"No Funds Found!"});a.setState({wallet:[e],stepTwo:!0,progressModalOpen:!1})}})}},{key:"startSearch",value:function(){var e=this;return this.setState({stepTwo:!1}),this.checkInput().then(function(t){switch(t.type){case"seed":return e.setState({progressModalOpen:!0}),e.getDataFromSeed(t.privKeys);case"privKeys":return e.getDataFromKeys(t.privKeys);case"xPrv":return e.setState({progressModalOpen:!0,derivitorStatus:[{name:"DigiByte Core",status:0}]}),e.getDataFromXprv(t.privKeys);default:return S.a.reject(new Error("Unknown type!"))}}).catch(function(t){e.setState({dialogOpen:!0,error:t.message})})}},{key:"sendBackup",value:function(){var e=this,t=new g.a.Transaction,a=[],n=[];return this.state.wallet.forEach(function(e){"privKey"!==e.type?e.addrs.forEach(function(e){e.utxos.forEach(function(t){t.address===e.main.privateKey.toLegacyAddress().toString()||t.address===e.main.privateKey.toAddress().toString()?n.push(e.main.privateKey.toString()):t.address!==e.change.privateKey.toLegacyAddress().toString()&&t.address!==e.change.privateKey.toAddress().toString()||n.push(e.change.privateKey.toString()),a.push(t)})}):(e.utxos.forEach(function(e){return a.push(e)}),n.push(e.main.toString()))}),t.from(a),t.to(this.state.dgbAddress,g.a.Unit.fromDGB(a.map(function(e){return e.amount}).reduce(function(e,t){return e+t})).toSatoshis()-1e3),t.fee(1e3),n.forEach(function(e){return t.sign(e.toString())}),function(e){var t=JSON.stringify({rawtx:e});return fetch("https://digiexplorer.info/api/tx/send",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:t}).then(function(e){return e.json()})}(t.serialize()).then(function(t){var a=t.txid;e.setState({txid:a,stepThree:!0,stepTwo:!1,confirmDialog:!1})}).catch(function(t){e.setState({dialogOpen:!0,error:t.message})})}},{key:"reset",value:function(){this.setState({wif:"",dgbAddress:"",addressError:!0,wallet:[],selectedServer:"https://digiexplorer.info",stepTwo:!1,confirmDialog:!1,dialogOpen:!1,progressModalOpen:!1,error:null,passwordDialog:!1,derivitorStatus:Q.map(function(e){return{name:e.name,status:0}})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(D,{address:this.state.dgbAddress,amount:this.state.wallet.length?this.getBalance(this.state.wallet.map(function(e){return e.totalBalance}).reduce(function(e,t){return e+t})):0,cancelDialog:function(){return e.setState({dgbAddress:"",confirmDialog:!1})},confirmDialog:this.sendBackup,dialogOpen:this.state.confirmDialog}),r.a.createElement(j,{dialogOpen:this.state.dialogOpen,error:this.state.error,closeDialog:function(){return e.setState({dialogOpen:!1})}}),r.a.createElement(N,{gapLimit:this.state.gapStatus,closeModal:function(){return e.setState({progressModalOpen:!1})},derivitorStatus:this.state.derivitorStatus,progressModalOpen:this.state.progressModalOpen}),r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"DigiSweep"),r.a.createElement("div",{style:{paddingRight:"25px",cursor:"pointer",userSelect:"none"},onClick:function(){return e.setState({currentUnit:"DGB"===e.state.currentUnit?"USD":"DGB"})}},r.a.createElement("h2",null,"Unit: ",this.state.currentUnit))),r.a.createElement("div",{className:"App-body"},this.state.stepThree&&r.a.createElement(z,{txid:this.state.txid}),!this.state.stepThree&&r.a.createElement(V,{gapLimit:this.state.gapLimit,updateGapLimit:function(t){return e.setState({gapLimit:t.target.value,gapStatus:t.target.value})},wif:this.state.wif,selectedServer:this.state.selectedServer,updateWif:function(t){return e.setState({wif:t.target.value})},updateSelectedServer:function(t){return e.setState({selectedServer:t.target.value})},startSearch:this.startSearch}),this.state.stepTwo&&r.a.createElement(q,{addressError:this.state.addressError,currentUnit:this.state.currentUnit,getBalance:function(t){return e.getBalance(t)},dgbAddress:this.state.dgbAddress,sendBackup:function(){return e.setState({confirmDialog:!0})},updateAddress:this.updateAddress,wallet:this.state.wallet})),r.a.createElement("footer",{className:"App-footer"}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[211,1,2]]]);
//# sourceMappingURL=main.17760d84.chunk.js.map